import discord
from discord.ext import commands

from revChatGPT.ChatGPT import Chatbot


class Summarize(commands.Cog):

    def __init__(self, bot):
        self.bot = bot
    
    @commands.command(aliases=['ask','chat'])
    async def gpt(self, ctx: commands.Context, *, argument):
        async with ctx.typing():
            await ctx.message.add_reaction("<a:typing:907302657209819208>")
            chatbot = Chatbot({"session_token": "eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..ZZw1joUpoN7MtNST.ko9J5yv8s5VAxcggzfqag2zvOVMsVIH5VkEnPuCT_76YZv38vtEq6-9W72FpgDeDv2aiH2zGai3zB3uYOBZvWjUDpJBwRl_Xw-m_p_1bdTKv26aGX7OklTBdYKvX8iS5mAKM5i5FRdwEGGXqpYoZOSI58LYioGIftqEfUjJu88qBZNisVmF2J9jRhu2m7W-6j3ZXABWH-MudV4majW-4stJNor1z2-Z7fvEHteeVDAmZO-ahq4vqursc-1qIWdurr7ns0-pw8yC_zEMx_GV4h6rUifo-y5hV8stU6V5ZqoiTLL1TFByDiDou35AaYAB3n3jpO9NWOyTzX950NCMRE_yxJKugylJHysB3hd9d9NwqElwq9NQLwpMLFhdbgqR-Mgj-8yAWIQ3aQRtGFHKKNwa5uKgcporM4OuR_tAHaw_SVQsS1dQV8HwQs9Mvgt0-D5B62BwZbCrIiVs3MgTPbo6o6X4SKCY0hqH4PzucC4eGgjARTik4ohwQjg7sye_tCx87_o_beMI8HyxMcOfWUk0jwyeJPQjGNP8N1QK3CsQSCnAo4SiU6EY6c4MFQG1szOp455f0sGRKB1lPj10kadmaRwOEtNLYxQNYd4mml5WRsKe7pXqzVYgQJse1io2hE-xVy8_0cp3hwU9iIXJh85K6Zss4nM-MMyZ8joVDbH2sS_Uq0FAUglcuV5g_FExMOndQ_XYQ91PJJAtLHpIXMnc5w2q6XlzVER6I_xBV7ErY9wNQkDSgIiAYXA4GM32Dna-KAR2p4Piyx_hltskEPwXos7wLHkJnNxDeLrTLC1zksUvNmYzl0wrBsAh8pTOHG_bx-9QnrB4RR6d7Th72Mba5INtUV8idxwBEfGB4BIHhWw03nZB4Hr5rcIa5A7WaNAGTdZFqFKQTAdf4siixUtG8n42ILV6UgB9OfA6rVD3wtFsBpFbNlcdo1xbto_BDGGavuJpI8sT24p5WIBq81AoSL-vueYiER3FvIRk-1aHGA2fL5PAERB1w9RyII9j98KEjFjprmjxNqCHh7vyYY8VvCgdOit5go73naM-Mj0t4bFRFoUoZa3XzNSzdpAmAQaIKnX2rocx5GG9L0E89BAGXUxJwn7shgE5M3IGebPzqPMTBG9qspn5QNA6iIrqugQqYj74z8M3hgX_29_ex_W4ayrVG0TqcffwZBHMjsLuSb7yYcqbafo4pkDr33mq1hIsln6ZuTJZNjGDY9x9M4rd8c00me3lyY12a2-aFlCJA2MV9ZoOoaZjvLpw0NIxzri3wm_cfhTHtocpDoj6xNzi7Bl7P_dMPYlZPqD6CZF7UinCVh-CSqoiQxrOGzfVUiGfX3smPu0m3n9Kp2LLqi_MfYN0J5WCvjxgqGLVqHpNE5Z7hZu2Zja3PndC64-ViKYyk1shX1R04kIIjeCvTmtWi11fqTsNEkPB_BT7RORJlA5Klag_WWm6b9P3_YkMJjIaQUwMX6NAey2BjzhUVdh3CrGSlXEThyACU9LqW2uV8wTgJI5gz91d_BlUeQzVBSxWibPFuqyJzffOJDsRbdpHmQfyZ3pmelnD4VW7xDCgT0sCjp4wEUEOPzwx8x2t_CfDXeuaC3HkS_fSc8tuNZwvQXWq_S7WJEpG-lh8EuHNkz8eSMMYc1RetMaqTjKP-MaxiJnJiA7ZaV0pYNiExRmlwboA6tbP-xEuZPvzlSNpZ7SZR2E2Ty1eqzZ13k37SnqNTeuGQwaamu2DGpT9ZwQhhI9Q8_TtbMk9q7rMijBbDcHCVs5ldAqcqbGaKXLYsLrVGmPGWLgUs1MfurZws_k89wIy6eMQp29q7Xr_ylQ-bPfi31cIvf1Jg9do4kNn4lt9ksjgkP86E85-taa1R4jSJcMNCwTsOjdbfeArmR4LrVdMquRYF6ki8gQpxg2zYOLSv8G-sERUkqvZ2A4umr688mfHm1lb6IRnwUBsA3oBU-xD0ewz6hB23AGOeTqx93_8ECDduY3XPvNUqsITk5181mQ88OI-JnK7BlTH9_cW0BgGrqCubkqIvp_UsVxaQo-HSaqeWBuqe7WlsMgT0nhkvQqgJx2XLCG7iTLoLj-GTez8IEcqbJ0Xiv2pKeHQvw9yBmzhBrYckvaDFXUiz5Fm5W-nBb2In_Ar0fgATIUNr6-a3yaaSPYSYC06mQOjJHX_J9PZ99u5XDlFlF5ajVVpvXrVMpeY7XR5WoymHTedRENYNKH4tBJnaAuzgEh3p5a6IU8GLIlaTSKCia3iwVfxy_Vee-vnWnN50zQfYyen6wl3t98le.LyVRN113y5_fE3Oy41lydg"}, conversation_id=None, parent_id=None)
            response = chatbot.ask(argument, conversation_id=None, parent_id=None) # You can specify custom conversation and parent ids. Otherwise it uses the saved conversation (yes. conversations are automatically saved)

            await ctx.reply(response['message'])


async def setup(bot):
  await bot.add_cog(Summarize(bot))